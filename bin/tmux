#!/usr/bin/env bash

set -e
if [ ! -x "$(command -v tmuxinator)" ]; then
    echo "Installing tmuxinator"
    sudo apt install -y tmuxinator
fi

cd $DAISY_PATH
. $DAISY_PATH/.env

if [ ! -z $DAISY_PATH/tmux.yaml ]; then
cat << EOF > $DAISY_PATH/tmux.yaml
name: daisy
windows:
   - main:
      layout: d9da,208x60,0,0[208x26,0,0{104x26,0,0,0,103x26,105,0,5},208x33,0,27{104x33,0,27,1,103x33,105,27,4}]] @0
      panes:
        - source $DAISY_PATH/setup.bash
        - source $DAISY_PATH/setup.bash
        - source $DAISY_PATH/setup.bash
        - source $DAISY_PATH/setup.bash
EOF
fi

tmuxinator start -p tmux.yaml
