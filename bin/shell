#!/usr/bin/env bash

set -e

cd $DAISY_PATH
. $DAISY_PATH/.env

REMOTE_DISPLAY=${DISPLAY%:*}
if [[ -z $REMOTE_DISPLAY && ! -z $DISPLAY ]]; then
    xhost +
fi

if [ -z `docker ps -q --no-trunc | grep $(docker-compose ps -q shell)` ]; then
    docker compose up shell -d
fi

docker compose exec shell /bin/bash